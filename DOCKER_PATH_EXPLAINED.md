# ğŸ“ Docker è·¯å¾„è¯¦è§£

## â“ é—®é¢˜ï¼š`/app/uploads` æ˜¯ç›¸å¯¹è°çš„ï¼Ÿ

**ç­”æ¡ˆï¼š`/app/uploads` æ˜¯å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„ï¼Œä¸æ˜¯ç›¸å¯¹è·¯å¾„ã€‚**

---

## ğŸ” è·¯å¾„è§£æ

### åœ¨ `-v` æŒ‚è½½å‘½ä»¤ä¸­

```powershell
-v ${PWD}/uploads:/app/uploads
```

**æ ¼å¼ï¼š** `å®¿ä¸»æœºè·¯å¾„:å®¹å™¨å†…è·¯å¾„`

| éƒ¨åˆ† | è·¯å¾„ç±»å‹ | è¯´æ˜ |
|------|---------|------|
| `${PWD}/uploads` | å®¿ä¸»æœºè·¯å¾„ | Windows ä¸Šçš„è·¯å¾„ï¼ˆç›¸å¯¹å½“å‰ç›®å½•ï¼‰ |
| `/app/uploads` | å®¹å™¨å†…ç»å¯¹è·¯å¾„ | Linux å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„ |

---

## ğŸ“‚ è·¯å¾„è¯¦è§£

### 1. å®¿ä¸»æœºè·¯å¾„ï¼š`${PWD}/uploads`

**`${PWD}`**ï¼š
- PowerShell å˜é‡
- è¡¨ç¤º **å½“å‰å·¥ä½œç›®å½•**ï¼ˆPrint Working Directoryï¼‰
- ä¾‹å¦‚ï¼š`D:\workspace\yishe-images`

**å®Œæ•´è·¯å¾„ç¤ºä¾‹ï¼š**
```
D:\workspace\yishe-images\uploads
```

**è¿™æ˜¯ Windows ä¸Šçš„è·¯å¾„**ï¼Œç›¸å¯¹äºä½ è¿è¡Œ `docker run` å‘½ä»¤æ—¶çš„ç›®å½•ã€‚

---

### 2. å®¹å™¨å†…è·¯å¾„ï¼š`/app/uploads`

**`/app`**ï¼š
- å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„
- åœ¨ Dockerfile ä¸­é€šè¿‡ `WORKDIR /app` è®¾ç½®
- è¿™æ˜¯ Linux é£æ ¼çš„è·¯å¾„ï¼ˆå®¹å™¨æ˜¯ Linux ç³»ç»Ÿï¼‰

**`/app/uploads`**ï¼š
- å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„
- ä¸æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œæ˜¯å®Œæ•´çš„ç»å¯¹è·¯å¾„
- ä»æ ¹ç›®å½• `/` å¼€å§‹çš„å®Œæ•´è·¯å¾„

**è·¯å¾„ç»“æ„ï¼š**
```
å®¹å™¨å†…ï¼ˆLinuxï¼‰:
/
â””â”€â”€ app/
    â”œâ”€â”€ uploads/     â† æŒ‚è½½ç‚¹
    â”œâ”€â”€ output/      â† æŒ‚è½½ç‚¹
    â”œâ”€â”€ server.js
    â”œâ”€â”€ package.json
    â””â”€â”€ ...
```

---

## ğŸ”„ è·¯å¾„æ˜ å°„å…³ç³»

```
å®¿ä¸»æœºï¼ˆWindowsï¼‰                   å®¹å™¨å†…ï¼ˆLinuxï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
D:\workspace\                       /
yishe-images\                       app/
  uploads/        â†â”€â”€â”€ æ˜ å°„ â”€â”€â”€â†’    uploads/
  output/         â†â”€â”€â”€ æ˜ å°„ â”€â”€â”€â†’    output/
```

**å·¥ä½œåŸç†ï¼š**
- å®¿ä¸»æœºï¼š`D:\workspace\yishe-images\uploads`
- å®¹å™¨å†…ï¼š`/app/uploads`
- ä¸¤è€…æŒ‡å‘åŒä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼ˆåŒå‘åŒæ­¥ï¼‰

---

## ğŸ“‹ Dockerfile ä¸­çš„è·¯å¾„è®¾ç½®

æŸ¥çœ‹ä½ çš„ Dockerfileï¼š

```dockerfile
# ç¬¬ 6 è¡Œ
WORKDIR /app
```

**ä½œç”¨ï¼š**
- è®¾ç½®å·¥ä½œç›®å½•ä¸º `/app`
- åç»­æ‰€æœ‰æ“ä½œéƒ½åœ¨ `/app` ç›®å½•ä¸‹è¿›è¡Œ
- `COPY . .` ä¼šæŠŠæ–‡ä»¶å¤åˆ¶åˆ° `/app`

**æ‰€ä»¥å®¹å™¨å†…çš„ç»“æ„æ˜¯ï¼š**
```
/app/                    â† WORKDIR è®¾ç½®çš„
â”œâ”€â”€ uploads/            â† æŒ‚è½½ç‚¹ï¼ˆæ•°æ®å·ï¼‰
â”œâ”€â”€ output/             â† æŒ‚è½½ç‚¹ï¼ˆæ•°æ®å·ï¼‰
â”œâ”€â”€ server.js           â† ä»é¡¹ç›®å¤åˆ¶
â”œâ”€â”€ package.json        â† ä»é¡¹ç›®å¤åˆ¶
â””â”€â”€ ...
```

---

## ğŸ¯ å®Œæ•´ç¤ºä¾‹

### åœºæ™¯ï¼šä½ åœ¨ `D:\workspace\yishe-images` ç›®å½•è¿è¡Œå‘½ä»¤

```powershell
# å½“å‰ç›®å½•
PS D:\workspace\yishe-images> 

# è¿è¡Œå‘½ä»¤
docker run -v ${PWD}/uploads:/app/uploads ...
```

**è·¯å¾„è§£æï¼š**

1. **`${PWD}`** = `D:\workspace\yishe-images`
2. **`${PWD}/uploads`** = `D:\workspace\yishe-images\uploads`
3. **`/app/uploads`** = å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„

**æ˜ å°„ç»“æœï¼š**
```
Windows: D:\workspace\yishe-images\uploads
         â†• (åŒå‘åŒæ­¥)
Linux:   /app/uploads
```

---

## ğŸ’¡ é‡è¦æ¦‚å¿µ

### 1. å®¹å™¨å†…è·¯å¾„æ˜¯ç»å¯¹è·¯å¾„

```dockerfile
# å®¹å™¨å†…è·¯å¾„æ€»æ˜¯ä» / å¼€å§‹
/app/uploads      âœ… ç»å¯¹è·¯å¾„
./uploads         âŒ ç›¸å¯¹è·¯å¾„ï¼ˆä¸æ¨èï¼‰
uploads           âŒ ç›¸å¯¹è·¯å¾„ï¼ˆä¸æ¨èï¼‰
```

### 2. å®¿ä¸»æœºè·¯å¾„å¯ä»¥æ˜¯ç›¸å¯¹æˆ–ç»å¯¹

```powershell
# ç›¸å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äºå½“å‰ç›®å½•ï¼‰
-v ${PWD}/uploads:/app/uploads
-v ./uploads:/app/uploads

# ç»å¯¹è·¯å¾„
-v D:\workspace\yishe-images\uploads:/app/uploads
-v C:\data\uploads:/app/uploads
```

### 3. è·¯å¾„æ˜ å°„æ˜¯åŒå‘çš„

- å®¿ä¸»æœºå†™å…¥æ–‡ä»¶ â†’ å®¹å™¨å†…å¯è§
- å®¹å™¨å†…å†™å…¥æ–‡ä»¶ â†’ å®¿ä¸»æœºå¯è§
- å®æ—¶åŒæ­¥

---

## ğŸ” éªŒè¯è·¯å¾„

### æ–¹æ³• 1ï¼šè¿›å…¥å®¹å™¨æŸ¥çœ‹

```powershell
# è¿›å…¥å®¹å™¨
docker exec -it yishe-images bash

# æŸ¥çœ‹å½“å‰ç›®å½•
pwd
# è¾“å‡ºï¼š/app

# æŸ¥çœ‹ uploads ç›®å½•
ls -la /app/uploads

# é€€å‡ºå®¹å™¨
exit
```

### æ–¹æ³• 2ï¼šæŸ¥çœ‹æŒ‚è½½ä¿¡æ¯

```powershell
# æŸ¥çœ‹å®¹å™¨çš„æŒ‚è½½ä¿¡æ¯
docker inspect yishe-images | findstr "Mounts"
```

è¾“å‡ºç¤ºä¾‹ï¼š
```json
"Mounts": [
    {
        "Type": "bind",
        "Source": "D:\\workspace\\yishe-images\\uploads",
        "Destination": "/app/uploads"
    }
]
```

---

## ğŸ“Š è·¯å¾„å¯¹æ¯”è¡¨

| ä½ç½® | è·¯å¾„ç±»å‹ | ç¤ºä¾‹ | è¯´æ˜ |
|------|---------|------|------|
| å®¿ä¸»æœº | ç›¸å¯¹è·¯å¾„ | `${PWD}/uploads` | ç›¸å¯¹äºè¿è¡Œå‘½ä»¤çš„ç›®å½• |
| å®¿ä¸»æœº | ç»å¯¹è·¯å¾„ | `D:\workspace\yishe-images\uploads` | å®Œæ•´è·¯å¾„ |
| å®¹å™¨å†… | ç»å¯¹è·¯å¾„ | `/app/uploads` | æ€»æ˜¯ä» `/` å¼€å§‹ |

---

## ğŸ“ æ€»ç»“

### `/app/uploads` çš„å«ä¹‰ï¼š

1. âœ… **å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„**
2. âœ… **ä¸æ˜¯ç›¸å¯¹è·¯å¾„**
3. âœ… **ä»æ ¹ç›®å½• `/` å¼€å§‹çš„å®Œæ•´è·¯å¾„**
4. âœ… **åœ¨ Dockerfile ä¸­é€šè¿‡ `WORKDIR /app` è®¾ç½®**

### æ˜ å°„å…³ç³»ï¼š

```
å®¿ä¸»æœºï¼ˆWindowsï¼‰             å®¹å™¨å†…ï¼ˆLinuxï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
${PWD}/uploads    â†â”€â”€â†’       /app/uploads
${PWD}/output     â†â”€â”€â†’       /app/output
```

### å…³é”®ç‚¹ï¼š

- **å·¦è¾¹**ï¼ˆ`${PWD}/uploads`ï¼‰ï¼šå®¿ä¸»æœºè·¯å¾„ï¼Œç›¸å¯¹äºä½ è¿è¡Œå‘½ä»¤çš„ç›®å½•
- **å³è¾¹**ï¼ˆ`/app/uploads`ï¼‰ï¼šå®¹å™¨å†…ç»å¯¹è·¯å¾„ï¼Œä»æ ¹ç›®å½•å¼€å§‹
- **æ˜ å°„**ï¼šä¸¤è€…æŒ‡å‘åŒä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼ŒåŒå‘åŒæ­¥

---

## âœ… å¿«é€Ÿè®°å¿†

- **å®¿ä¸»æœºè·¯å¾„**ï¼šWindows é£æ ¼ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹æˆ–ç»å¯¹
- **å®¹å™¨å†…è·¯å¾„**ï¼šLinux é£æ ¼ï¼Œæ€»æ˜¯ç»å¯¹è·¯å¾„ï¼ˆä» `/` å¼€å§‹ï¼‰
- **`/app`**ï¼šDockerfile ä¸­è®¾ç½®çš„å·¥ä½œç›®å½•
- **`/app/uploads`**ï¼šå®¹å™¨å†…çš„ç»å¯¹è·¯å¾„ï¼Œä¸æ˜¯ç›¸å¯¹è·¯å¾„


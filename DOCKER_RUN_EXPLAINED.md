# ğŸ“– Docker Run å‘½ä»¤è¯¦ç»†è§£æ

## å®Œæ•´å‘½ä»¤

```powershell
docker run -d --name yishe-images -p 1513:1513 -v ${PWD}/uploads:/app/uploads -v ${PWD}/output:/app/output 1sdesign/yishe-images:latest
```

---

## ğŸ” é€éƒ¨åˆ†è§£æ

### 1. `docker run`
**ä½œç”¨ï¼š** Docker çš„æ ¸å¿ƒå‘½ä»¤ï¼Œç”¨äºåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°å®¹å™¨

**è¯´æ˜ï¼š**
- `docker run` = `docker create` + `docker start`
- ä¼šåŸºäºé•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨å¹¶ç«‹å³å¯åŠ¨

---

### 2. `-d`
**ä½œç”¨ï¼š** åå°è¿è¡Œï¼ˆdetached modeï¼‰

**è¯´æ˜ï¼š**
- `-d` = `--detach`
- å®¹å™¨åœ¨åå°è¿è¡Œï¼Œä¸ä¼šå ç”¨å½“å‰ç»ˆç«¯
- å¦‚æœä¸åŠ  `-d`ï¼Œå®¹å™¨ä¼šåœ¨å‰å°è¿è¡Œï¼Œç»ˆç«¯ä¼šè¢«å ç”¨

**å¯¹æ¯”ï¼š**
```powershell
# åå°è¿è¡Œï¼ˆæ¨èï¼‰
docker run -d ...

# å‰å°è¿è¡Œï¼ˆä¼šå ç”¨ç»ˆç«¯ï¼‰
docker run ...
```

---

### 3. `--name yishe-images`
**ä½œç”¨ï¼š** ç»™å®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°

**è¯´æ˜ï¼š**
- `--name`ï¼šæŒ‡å®šå®¹å™¨åç§°
- `yishe-images`ï¼šå®¹å™¨çš„åç§°ï¼ˆå¯ä»¥è‡ªå®šä¹‰ï¼‰
- æœ‰äº†åç§°åï¼Œå¯ä»¥ç”¨åç§°æ¥ç®¡ç†å®¹å™¨ï¼ˆå¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ç­‰ï¼‰

**å¥½å¤„ï¼š**
```powershell
# ä½¿ç”¨åç§°ç®¡ç†å®¹å™¨ï¼ˆæ›´æ–¹ä¾¿ï¼‰
docker stop yishe-images
docker start yishe-images
docker logs yishe-images

# å¦‚æœä¸æŒ‡å®šåç§°ï¼Œéœ€è¦ä½¿ç”¨å®¹å™¨ IDï¼ˆä¸æ–¹ä¾¿ï¼‰
docker stop abc123def456
```

**æ³¨æ„ï¼š**
- å®¹å™¨åç§°å¿…é¡»å”¯ä¸€
- å¦‚æœåç§°å·²å­˜åœ¨ï¼Œéœ€è¦å…ˆåˆ é™¤æ—§å®¹å™¨æˆ–ä½¿ç”¨ä¸åŒåç§°

---

### 4. `-p 1513:1513`
**ä½œç”¨ï¼š** ç«¯å£æ˜ å°„ï¼ˆPort Mappingï¼‰

**æ ¼å¼ï¼š** `-p å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£`

**è¯´æ˜ï¼š**
- `-p` = `--publish`
- `1513:1513`ï¼šå·¦è¾¹æ˜¯å®¿ä¸»æœºç«¯å£ï¼Œå³è¾¹æ˜¯å®¹å™¨ç«¯å£
- å°†å®¹å™¨çš„ 1513 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 1513 ç«¯å£

**å·¥ä½œåŸç†ï¼š**
```
å¤–éƒ¨è®¿é—® localhost:1513
         â†“
    å®¿ä¸»æœºç«¯å£ 1513
         â†“
    å®¹å™¨ç«¯å£ 1513
         â†“
    åº”ç”¨ç›‘å¬ 1513
```

**ç¤ºä¾‹ï¼š**
```powershell
# æ˜ å°„åˆ°ä¸åŒç«¯å£
-p 8080:1513    # è®¿é—® localhost:8080 â†’ å®¹å™¨ 1513
-p 1513:1513    # è®¿é—® localhost:1513 â†’ å®¹å™¨ 1513ï¼ˆå½“å‰ä½¿ç”¨ï¼‰
```

**ä¸ºä»€ä¹ˆéœ€è¦ç«¯å£æ˜ å°„ï¼Ÿ**
- å®¹å™¨æ˜¯éš”ç¦»çš„ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®å®¹å™¨å†…çš„ç«¯å£
- é€šè¿‡ç«¯å£æ˜ å°„ï¼Œå¤–éƒ¨æ‰èƒ½è®¿é—®å®¹å™¨å†…çš„æœåŠ¡

---

### 5. `-v ${PWD}/uploads:/app/uploads`
**ä½œç”¨ï¼š** æ•°æ®å·æŒ‚è½½ï¼ˆVolume Mountï¼‰- ä¸Šä¼ ç›®å½•

**æ ¼å¼ï¼š** `-v å®¿ä¸»æœºè·¯å¾„:å®¹å™¨å†…è·¯å¾„`

**è¯´æ˜ï¼š**
- `-v` = `--volume`
- `${PWD}`ï¼šPowerShell å˜é‡ï¼Œè¡¨ç¤ºå½“å‰å·¥ä½œç›®å½•
- `/uploads`ï¼šå®¿ä¸»æœºä¸Šçš„ uploads ç›®å½•
- `/app/uploads`ï¼šå®¹å™¨å†…çš„ uploads ç›®å½•
- `:`ï¼šæ˜ å°„å…³ç³»

**å·¥ä½œåŸç†ï¼š**
```
å®¿ä¸»æœº: D:\workspace\yishe-images\uploads
         â†• (åŒå‘åŒæ­¥)
å®¹å™¨å†…: /app/uploads
```

**å¥½å¤„ï¼š**
- æ•°æ®æŒä¹…åŒ–ï¼šå³ä½¿åˆ é™¤å®¹å™¨ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±
- æ–¹ä¾¿è®¿é—®ï¼šå¯ä»¥ç›´æ¥åœ¨å®¿ä¸»æœºæŸ¥çœ‹å’Œç®¡ç†æ–‡ä»¶
- å®æ—¶åŒæ­¥ï¼šå®¹å™¨å†…å’Œå®¿ä¸»æœºçš„æ–‡ä»¶å®æ—¶åŒæ­¥

**Windows è·¯å¾„è¯´æ˜ï¼š**
```powershell
# PowerShell ä¸­ä½¿ç”¨ ${PWD}
-v ${PWD}/uploads:/app/uploads

# CMD ä¸­ä½¿ç”¨ %CD%
-v %CD%/uploads:/app/uploads

# æˆ–ä½¿ç”¨ç»å¯¹è·¯å¾„
-v D:\workspace\yishe-images\uploads:/app/uploads
```

---

### 6. `-v ${PWD}/output:/app/output`
**ä½œç”¨ï¼š** æ•°æ®å·æŒ‚è½½ï¼ˆVolume Mountï¼‰- è¾“å‡ºç›®å½•

**è¯´æ˜ï¼š**
- ä¸ uploads ç›®å½•ç±»ä¼¼
- æŒ‚è½½è¾“å‡ºç›®å½•ï¼Œä¿å­˜å¤„ç†åçš„å›¾ç‰‡

**æ•°æ®æµï¼š**
```
ç”¨æˆ·ä¸Šä¼  â†’ uploads/ (å®¿ä¸»æœº)
         â†“
    å®¹å™¨å¤„ç†
         â†“
output/ (å®¿ä¸»æœº) â† å¤„ç†ç»“æœ
```

---

### 7. `1sdesign/yishe-images:latest`
**ä½œç”¨ï¼š** è¦ä½¿ç”¨çš„é•œåƒåç§°å’Œæ ‡ç­¾

**è¯´æ˜ï¼š**
- `1sdesign/yishe-images`ï¼šé•œåƒåç§°
- `latest`ï¼šæ ‡ç­¾ï¼ˆç‰ˆæœ¬ï¼‰
- Docker ä¼šåŸºäºè¿™ä¸ªé•œåƒåˆ›å»ºå®¹å™¨

---

## ğŸ“Š å‘½ä»¤ç»“æ„å›¾

```
docker run
â”œâ”€â”€ -d                    # åå°è¿è¡Œ
â”œâ”€â”€ --name yishe-images   # å®¹å™¨åç§°
â”œâ”€â”€ -p 1513:1513         # ç«¯å£æ˜ å°„
â”œâ”€â”€ -v .../uploads:...   # æ•°æ®å·1ï¼šä¸Šä¼ ç›®å½•
â”œâ”€â”€ -v .../output:...    # æ•°æ®å·2ï¼šè¾“å‡ºç›®å½•
â””â”€â”€ 1sdesign/yishe-images:latest  # é•œåƒåç§°
```

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

1. **Docker è¯»å–é•œåƒ**
   ```
   ä»æœ¬åœ°æˆ–è¿œç¨‹æ‹‰å– 1sdesign/yishe-images:latest
   ```

2. **åˆ›å»ºå®¹å™¨**
   ```
   åŸºäºé•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨
   è®¾ç½®åç§°ï¼šyishe-images
   ```

3. **é…ç½®ç½‘ç»œ**
   ```
   æ˜ å°„ç«¯å£ï¼š1513:1513
   ```

4. **æŒ‚è½½æ•°æ®å·**
   ```
   uploads ç›®å½• â†” å®¹å™¨ /app/uploads
   output ç›®å½• â†” å®¹å™¨ /app/output
   ```

5. **å¯åŠ¨å®¹å™¨**
   ```
   æ‰§è¡Œ CMD ["node", "server.js"]
   åº”ç”¨åœ¨åå°è¿è¡Œ
   ```

6. **æœåŠ¡å¯ç”¨**
   ```
   è®¿é—® http://localhost:1513
   ```

---

## ğŸ’¡ å¸¸ç”¨å˜ä½“

### å˜ä½“ 1ï¼šå‰å°è¿è¡Œï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰

```powershell
docker run --name yishe-images -p 1513:1513 -v ${PWD}/uploads:/app/uploads -v ${PWD}/output:/app/output 1sdesign/yishe-images:latest
```

**åŒºåˆ«ï¼š** ç§»é™¤äº† `-d`ï¼Œå¯ä»¥çœ‹åˆ°å®æ—¶æ—¥å¿—

---

### å˜ä½“ 2ï¼šä½¿ç”¨ä¸åŒç«¯å£

```powershell
docker run -d --name yishe-images -p 8080:1513 -v ${PWD}/uploads:/app/uploads -v ${PWD}/output:/app/output 1sdesign/yishe-images:latest
```

**åŒºåˆ«ï¼š** è®¿é—® `localhost:8080` è€Œä¸æ˜¯ `1513`

---

### å˜ä½“ 3ï¼šæ·»åŠ ç¯å¢ƒå˜é‡

```powershell
docker run -d --name yishe-images -p 1513:1513 -e NODE_ENV=production -e PORT=1513 -v ${PWD}/uploads:/app/uploads -v ${PWD}/output:/app/output 1sdesign/yishe-images:latest
```

**åŒºåˆ«ï¼š** æ·»åŠ äº†ç¯å¢ƒå˜é‡é…ç½®

---

### å˜ä½“ 4ï¼šè‡ªåŠ¨é‡å¯

```powershell
docker run -d --name yishe-images --restart unless-stopped -p 1513:1513 -v ${PWD}/uploads:/app/uploads -v ${PWD}/output:/app/output 1sdesign/yishe-images:latest
```

**åŒºåˆ«ï¼š** å®¹å™¨å¼‚å¸¸é€€å‡ºæ—¶ä¼šè‡ªåŠ¨é‡å¯

---

## ğŸ¯ Windows PowerShell å®Œæ•´å‘½ä»¤

```powershell
docker run -d `
  --name yishe-images `
  -p 1513:1513 `
  -v ${PWD}/uploads:/app/uploads `
  -v ${PWD}/output:/app/output `
  1sdesign/yishe-images:latest
```

**è¯´æ˜ï¼š**
- ä½¿ç”¨åå¼•å· `` ` `` æ¢è¡Œï¼ˆPowerShellï¼‰
- æ›´æ˜“è¯»ï¼Œä¾¿äºä¿®æ”¹

---

## ğŸ“‹ å‘½ä»¤å‚æ•°æ€»ç»“è¡¨

| å‚æ•° | å®Œæ•´å½¢å¼ | ä½œç”¨ | å¿…éœ€ |
|------|---------|------|------|
| `-d` | `--detach` | åå°è¿è¡Œ | æ¨è |
| `--name` | - | å®¹å™¨åç§° | æ¨è |
| `-p` | `--publish` | ç«¯å£æ˜ å°„ | âœ… å¿…éœ€ |
| `-v` | `--volume` | æ•°æ®å·æŒ‚è½½ | æ¨è |
| é•œåƒå | - | ä½¿ç”¨çš„é•œåƒ | âœ… å¿…éœ€ |

---

## âœ… è¿è¡ŒåéªŒè¯

### 1. æ£€æŸ¥å®¹å™¨çŠ¶æ€

```powershell
docker ps
```

åº”è¯¥çœ‹åˆ° `yishe-images` å®¹å™¨åœ¨è¿è¡Œã€‚

### 2. æŸ¥çœ‹æ—¥å¿—

```powershell
docker logs yishe-images
```

### 3. è®¿é—®æœåŠ¡

æ‰“å¼€æµè§ˆå™¨ï¼šhttp://localhost:1513

### 4. æ£€æŸ¥æ•°æ®å·

```powershell
# æŸ¥çœ‹ uploads ç›®å½•
ls uploads

# æŸ¥çœ‹ output ç›®å½•
ls output
```

---

## ğŸ› ï¸ å¸¸ç”¨ç®¡ç†å‘½ä»¤

```powershell
# åœæ­¢å®¹å™¨
docker stop yishe-images

# å¯åŠ¨å®¹å™¨
docker start yishe-images

# é‡å¯å®¹å™¨
docker restart yishe-images

# æŸ¥çœ‹æ—¥å¿—
docker logs yishe-images
docker logs -f yishe-images  # å®æ—¶æ—¥å¿—

# è¿›å…¥å®¹å™¨å†…éƒ¨
docker exec -it yishe-images bash

# åˆ é™¤å®¹å™¨
docker rm yishe-images

# å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨
docker rm -f yishe-images
```

---

## ğŸ“ æ€»ç»“

è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼š
1. âœ… åœ¨åå°è¿è¡Œå®¹å™¨
2. âœ… æ˜ å°„ç«¯å£ 1513
3. âœ… æŒ‚è½½æ•°æ®ç›®å½•ï¼ˆæŒä¹…åŒ–ï¼‰
4. âœ… ä½¿ç”¨æŒ‡å®šçš„é•œåƒ
5. âœ… ç»™å®¹å™¨èµ·åæ–¹ä¾¿ç®¡ç†

**ç»“æœï¼š** ä½ çš„åº”ç”¨åœ¨å®¹å™¨ä¸­è¿è¡Œï¼Œå¯ä»¥é€šè¿‡ `http://localhost:1513` è®¿é—®ï¼

